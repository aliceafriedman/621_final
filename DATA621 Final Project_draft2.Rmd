---
title: "DATA621 Final Project"
author: Ivan Tikhonov, Seung Min Song, Alice Frieddman
output:  
  html_document:
    toc: true
    toc_float: true
    show_toggle: true
  pdf_document:
  includes:
  in_header: header.html
css: ./lab.css
highlight: pygments
theme: cerulean
toc: true
toc_float: true
linkcolor: blue
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, cache=TRUE)
library(gridExtra)
library(psych)
library(corrplot)
#library(onehot)
#library(pheatmap)
library(RColorBrewer)
#library(rolog)
library(tidyr)
library(ggplot2)
library(MASS)
#library(class)
#library(Matrix)
library(rpart)
library(knitr)
#library(ISLR)
#library(GGally)
#library(ggmap)
library(ggplot2)
#library(gargle)
#library(ggthemes)
#library(gargle)
library(dplyr)
library(randomForest)
#library(caTools)
#library(forecast)
#library(quantmod)
#library(data.table)
#library(xts)
#library(zoo)
#library(base)
#library(TTR)
library(Metrics)
library(caret)
```
## Abstract 

This study investigates the external factors affecting students' academic performance in secondary schools' math and Portuguese language courses. Using a quantitative data set obtained through a survey, the study analyzes various external variables, such as students' health, social and demographic factors, study habits, and other relevant factors to understand their impact on academic performance.

The study uses Multiple Linear Regression and Weighted Least Square Regression to examine the relationship between a dependent variable (final grade) and multiple independent variables. We use multiple graph to finds that although there is not a significant difference, male and female students without romantic involvement have better grades and students with internet access had a higher average grade than those without. Additionally, it was observed that the overall average grade decreases as travel time increases and frequency of drinking increases, the average score decreases accordingly. The study could not conclude that there is a direct relationship between travel time and absences. Further investigation is required to determine the relationship between study time, health, and the average score by health.

This study's methodology and results will be of interest to researchers in the field of education, providing a basis for future studies on external factors that impact academic performance. Overall, the study's findings have significant implications for the education sector, providing insights that can inform future efforts to support student academic success and improve educational outcomes. The study's methodology and results are of interest to educators, policymakers, and other stakeholders in the education sector and can contribute to the development of evidence-based practices.

## Introduction 

This study may be relevant to you as it explores the external factors that have an impact on students' grades. By analyzing the various external variables that can influence academic performance, this study provides valuable insights that can help parents, educators, and policymakers to better support students' success in school. Specifically, this study looks at factors such as students' health, social and demographic factors, study habits, and other relevant factors that can have an impact on their academic performance.

Understanding the external factors that can affect a student's academic performance can be helpful in creating a supportive home environment and developing effective strategies to help a child succeed in school. This study's findings could also be useful for parents and educators to monitor and provide proper guidelines for external factors that may affect students' academic performance, such as romantic relationships, drinking habits, and how they use their free time. By gaining a deeper understanding of how these factors impact students' grades, parents and educators can work to create a more supportive environment for students and help them develop healthy habits that promote academic success.

In the wider educational industry, the findings of this study can provide insights into how to better support students' academic success and enhance their overall educational experience. Educators and policymakers can use this research to identify areas where they can improve educational outcomes, such as implementing programs to support students' health or providing resources to help students develop effective study habits.

The data used in this study was collected from a survey of secondary school students and includes information on various external variables and their impact on students' grades. The data covers a range of subjects, including math, language, and other core academic areas, providing a comprehensive understanding of the factors that influence student performance across different subjects.

## Key Words

* external factors
* internal factors 
* academic performance
* Weighted Least Square Regression
* multiple linear regression
* health
* internet access
* study habits
* educational outcomes

## Literature Review

Academic success is a widely studied phenomenon. Previous studies have used Pearson’s partial correlations, moderated linear regression, or analysis of variance between groups (ANOVA) to determine the relationship between factors such as demographics (e.g. sex), lifestyle habits (e.g. screen time), and physical and cognitive abilities (e.g. cardiovascular fitness measured by VO2 Max) to predict academic achievement. All of the studies presented below attempt to understand factors associated with a *student* rather than a school or teacher that my predict academic success, and so (as is the case with our data set) look at cross-section of students at a single school, so that the school itself is not considered a factor. This is different from our data set which includes two high schools. 

A large number of factors  have been identified in previous studies to predict academic achievement including sex, screen time, sleep, cell-phone use, maternal education, IQ; however, the effect typically found is low (explaining between approximately 6% and 50% of variation). This indicates that other factors not included in the study (which may include student-specific habits like study habits or school-related factors like school quality) may impact variation, and that the true model is likely complex.


### [Title: Application of Multiple Linear Regression Identifying Contributing Factors in Students’Academic Achievement]((https://www.researchgate.net/publication/366929441_Application_of_Multiple_Linear_Regression_in_Identifying_Contributing_Factors_in_Students%27_Academic_Achievement)
Authors: Dg Siti Nurisya Sahirah Binti Ag Isha and Siti Rahayu Binti Mohd Hashim
Proceedings of the International Conference on Mathematical Sciences and Statistics 2022 (ICMSS 2022)At: Selangor, Malaysia
Mathematics With Economics Programme, Faculty of Science and Natural Resources, December 2022

This study aimed to identify significant factors that contribute to students' academic success by analyzing internal and external factors. The study involved 327 final-year undergraduate students and found that self-esteem, intelligence, and maternal education were significant factors affecting students' achievement. 

In this research, they made three different models to see which factors were most important for academic achievement. They found that self-esteem, IQ, and maternal education were the most important factors. 


### [Title: A Study on Academic Achievement and Personality of Secondary School Students](https://files.eric.ed.gov/fulltext/EJ1149330.pdf)
Authors: Dr. Suvarna V. D.and Dr H. S. Ganesha Bhata1
Research in Pedagogy, v6 n1 p99-108, 2016

This study uses ANOVA and the Pearson's product-moment coefficient to test hypotheses related to differences in academic achievement between different groups of students (including both demographics and responses to a personality test ) using a data set of approximately 300 secondary school students.The results find that the students' age and gender affect their achievement levels, but that other demographic categories and (interestingly) personality characteristics do not.

### [Predictors of Academic Performance in High School Students: The Longitudinal ASAP Study](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC9365103/#:~:text=Finally%2C%20psychological%20factors%20such%20as,42%2C%2043%2C%2048).)
Authors: Marie-Maude Dubuc, Mylene Aubertin-Leheudr, and Antony D. Karelis
Published online 2022 May 1, International Journal of Exercise

This study used moderated multivariate linear regression, separately comparing male and female students, to evaluate the impact of social, physical, and cognitive factors to explain variation in academic achievement among a cohort of 185 high-school students evaluated at a single high school over three years. The researchers controlled for demographic factors such as race, income, and ethnicity and use both a cross-sectional and longitudinal approach. In their results, they found that sex, cardiovascular fitness (measured by VO2 Max), and working memory were important predictors; however, they found that results differed when controlling for sex, school subject, and study design indicating that academic performance is in fact a highly complex phenomenon.

## Data Source

The data source is from a [Kaggle competition](https://www.kaggle.com/datasets/uciml/student-alcohol-consumption) and represents observations from 662 students at two high schools. The data is initially split into two data sets based on which subject is being observed (Portuguese language or math). 

We will use the data set to predict academic achievement represented by the final grades, `G3`. A data dictionary is included in Appendix 1.




## Data Exploration
### Data Preparation
The first task is to merge the data sets, identifying which students are identical and which grades correspond to which class. We can consider the data in three ways:
1. Predicting achievement in math, with df_mat
2. Predicting achievement in language, with df_por
3. Predicting achievement in school independent of subject, with df_both, using a target `final_grade`, which is the average of both classes. Because students have answered with different number of absences in the different classes, we have also averahed the absences in this dataset. There are 370 records with identical features in both datasets outside of the grades and absences, which are presumed to be specific to the subject. The field `paid` refers to subject-specific paid tutoring.


```{r merge}

df_mat <- read.csv("https://raw.githubusercontent.com/seung-m1nsong/602/main/Final/student-mat.csv") 

df_por <- read.csv("https://raw.githubusercontent.com/seung-m1nsong/602/main/Final/student-por.csv")

df_both <- dplyr::inner_join(
  df_mat %>% 
    rename(
      G1_mat = G1,
      G2_mat = G2,
      G3_mat = G3, 
      absence_mat = absences,
      failures_mat = failures,
      paid_mat = paid
    ), 
  df_por%>% 
    rename(
      G1_por = G1,
      G2_por = G2,
      G3_por = G3, 
      absence_por = absences,
      failures_por = failures,
      paid_por = paid
    )
  ) %>% 
    rowwise() %>%
      mutate(
        absences_mean = mean(absence_mat, absence_por),
        final_grade = mean(G3_mat, G3_por),
        failures = mean(failures_mat, failures_por),
        paid_tutor = if_else(paid_mat=="yes" | paid_por=="yes", "yes", "no")
      ) %>% 
      select(-ends_with("por"), -ends_with("_mat"))
  
```
Include: 
```{r descriptions}
descrip <- describe(df_both)
descrip_por <- describe(df_por)
decrip_mat <- describe(df_mat)
```

* EDA
  * The dataframe df_mat contains 395 entries (rows) with 33 columns, representing values related to a math class
  * The data set df_por contains 649 entries (rows) with 33 columns, representing values related to a Portuguese class 
  * The combined data set df_both contains ```nrows(df_both)``` with ```length(df_both)``` columns.
  * The data types of the columns include integers (int64) and objects (object).
  * The columns represent various features of the student data set such as personal and family characteristics, academic performance, and social activities.
  * Some of the columns include: **school**, **sex**, **age**, **address**, **family size**, **parents' education**, **mother and father's occupation**, **travel time**, **study time**, **number of failures**, **support received from school**, **family**, **extra-curricular**, **activities**, **health**, and **academic grades**.

### Overall Statistics
To gain comprehensive insights, we can merge *df_mat* and *df_por* data sets and analyze their collective statistics by looking at studends in both classes. 

When examining the distinctive variables in the **df_both**, a few noteworthy ones stand out:

* failures:
  * The average is shown as ```round(mean(df_both$failures), 2)```, but considering that the maximum value is ```max(df_both$failures)```, it seems that some students have failed in several subjects in the previous semester.
  * The skew value is ```descrip["failures", "skew"]```, which is a very large positive value, indicating that the data is skewed to the right.

* travel time:
  * The average is ```descrip["traveltime", "skew"]```, and it seems that most students take a relatively short time to school.
  * The skewness value is ```descrip["traveltime", "skew"]```, which is positive and indicates that the data is skewed to the right.

* absences:
  * The average is ```descrip["absences", "mean"]```, indicating that on average students missed about 4 days.
  * Since the maximum value is 75, which is a very large value, it is possible that some students have many absences.
  * The skewness value is ```descrip["absences", "skew"]```, which is a very large positive value, indicating that the data is very skewed to the right.

* Dalc (workday drinking):
  * The average is ```descrip["Dalc", "mean"]```, and most students seem to be drinking relatively little on workdays.
  * The skewness value is ```descrip["Dalc", "skew"]```, which is positive and indicates that the data is skewed to the right.

* Average Drinking: During the week, students average about ```descrip["Walc", "mean"]``` units of drinking.
  * The standard deviation of the drinking amount is 1.29, showing the degree of scattering of the data. Most students appear to have weekday alcohol consumption spread around the average.
  * The skewness value has a positive value of ```descrip["Walc", "skew"]```, and the distribution type is skewed to the right. That said, some students are likely to consume relatively more alcohol during the week.
  
* health:
  * The average is ```descrip["health", "mean"]```, and the average health status of students seems to be in the middle.
  * A negative skewness value of ```descrip["health", "skew"]``` indicates that the data is slightly skewed to the left.

`A full descriptive summary of variables in included in Appendix 2. 

### Basic Plots
Basic plots of numeric variables help us understand if they have a normal distribution -- necessary to undestand if a particular model type will be appropriate. In general, we can see most features are not normally distributed, meaning that linear regression is not likely to have good predictive value. Basic plots are included in Appendix 3.


### Correlation

When considering the distribution of *traveltime*, *studytime*, *failures*,	*famrel*, *freetime*, *goout*, *Dalc*, *Walc*, *health*, and *absences* across different categories, it becomes evident that these variables show a relatively even distribution within each G3 group.

We establish the presences or absence of multicollinearity in order to again determine the suitability of different model approaches, or determine if we should consider dropping some variables.

We can see that mother's and father's education (`Medu` and `Fadu`) as well as daily and weekly alcholol consumption (`Dalc` and `Walc`) are highly correlate.

```{r corrplot}
corrplot(cor(df_both %>% select(-final_grade) %>% select_if(is.numeric)), type="upper", diag = FALSE)
```
We can use box plots to understand the impact of factor variables on the target final grade. We can see that `failures` jumps out as having significant predictive value.

```{r boxplots}
p1 <- df_both %>% ggplot(aes(factor(traveltime), final_grade)) + geom_boxplot()
p2 <- df_both %>% ggplot(aes(factor(studytime), final_grade)) + geom_boxplot()
p3 <- df_both %>% na.omit() %>% ggplot(aes( factor(failures), final_grade)) + geom_boxplot()
p4 <- df_both %>% na.omit() %>% ggplot( aes(factor(famrel), final_grade)) + geom_boxplot()
p5 <- df_both %>% na.omit() %>% ggplot( aes(factor(freetime), final_grade)) + geom_boxplot()
p6 <- df_both %>% na.omit() %>% ggplot( aes(factor(goout), final_grade)) + geom_boxplot()
p7 <- df_both %>% na.omit() %>% ggplot( aes(factor(Dalc), final_grade)) + geom_boxplot()
p8 <- df_both %>% na.omit() %>% ggplot( aes(factor(Walc), final_grade)) + geom_boxplot()
p9 <- df_both %>% na.omit() %>% ggplot( aes(factor(health), final_grade)) + geom_boxplot()
p10<- df_both %>% na.omit() %>% ggplot( aes(factor(Medu), final_grade)) + geom_boxplot()

#p4 <- train_df %>% na.omit() %>% ggplot(aes(pH, FixedAcidity)) + geom_point(alpha=.1) + geom_smooth()
grid.arrange(p1, p2, p3, p4, p5, p6, p7,p8,p9,p10, ncol=4) 
```

In order to determine how best to measure overall student achievement across the classes, we evaluate the correlation between `G3_mat` and `G3_por`. In general, it appears that these correlation between these two subjects is quite high, especially if we omit final grades of "0" from consideration; this is helpful because it gives us a sense of the upper bound of how much variation in achievement can be explained by other features -- this correlation, after all, is for final grades for different classes but for the same students.

```{r}
x <- "Portuguese Final Grade"
y <- "Math Final Grade"
final_grades_coef <- cor(df_both$G3_mat, df_both$G3_por, use="pairwise.complete.obs")
df_both %>% na.omit() %>% ggplot(aes(G3_mat, G3_por)) + 
  geom_point(position="jitter") +
  ggtitle(
    paste(
    "Correlation between final grades in Math and Portuguese,",
    round(final_grades_coef, 2)
    )) + 
  xlab(x) + 
  ylab(y)
  

nonzeroes <- df_both %>% na.omit() %>% subset(G3_por > 0 & G3_mat >0)
final_grades_coef <- cor(nonzeroes$G3_mat, nonzeroes$G3_por, use="pairwise.complete.obs")
nonzeroes  %>%
  ggplot(aes(G3_mat, G3_por)) + 
  geom_point(position="jitter") +
  ggtitle(
    paste(
    "Correlation between final grades omitting grades of zero,",
    round(final_grades_coef, 2)
    )) + 
  xlab(x) + 
  ylab(y)
 
```

### Missing values

The data set is complete with no missing values; however in merging the two datasets we had to make a decision for how to deal with variables that are subject specific. this treatment is described below. 

### Renaming columns
We change `famsup` to `famEdsup`, change `Dacl` to `dayAlc`, change `Walc` to `weekAlc`, and change `goout` to `friendtime` so that it is easier to understand. We also change the name of binary values to reflect the 1 value, e.g 

### Adding new columns

We used the dplyr::mutate() method to create a new columns in the `df_both` data set:
`final_grade`: an average of the final grade for both classes
`absences_mean`:  average absences reported across both classes
`parentEdu`: sum of `Medu` + `Fedu` to remove a collinearity and combine parental education into a single variable
`paid_tutor`: this column is marked as "yes" if the student receives paid tutoring in either subject

```{r new-vars}
df_both$parentEdu <- df_both$Medu + df_both$Fedu
```


### Replacing binary values

For easier computation and interpretation of results, we replace all binary data ("yes", "no"; "rural" or "urban"; "m" or "f") with 1 or 0.
```{r binary}

binary <- function(df, col, level1="yes", level0="no"){
  df[[col]][df[[col]]==level1] <- 1
  df[[col]][df[[col]]==level0] <- 0
  return(df[[col]])
}

df_both$schoolsup <- binary(df_both, "schoolsup")
df_both$famsup <- binary(df_both, "famsup")
df_both$paid_tutor <- binary(df_both, "paid_tutor")
df_both$activities <- binary(df_both, "activities")
df_both$nursery <- binary(df_both, "nursery")
df_both$higher <- binary(df_both, "higher")
df_both$internet <- binary(df_both, "internet")
df_both$romantic <- binary(df_both, "romantic")
df_both$sex <- binary(df_both, "sex", "F", "M")
df_both$Pstatus <- binary(df_both, "Pstatus", "A", "T")
df_both$address <- binary(df_both, "address", "R", "U")
df_both$famsize <- binary(df_both, "famsize", "GT3", "LE3")
```

```{r rename}
df_both <- df_both %>% rename(
  famEdsup = famsup,
  sex_F = sex,
  weekAlc = Walc,
  friedtime = goout,
  rural = address,
  par_apart = Pstatus,
  friendtime = goout,
  fam_large = famsize
)
  
```
### Remove rows

Any record that has a value of 0 for any of the three exams may indicate that the test was not taken or abandoned, and such records will be removed from the data set to avoid interference with the analysis

```{r echo=FALSE}
df_student <- df_student[df_student$G1 != 0 & df_student$G2 != 0 & df_student$G3 != 0, ]
```

## Data Visualization

### Romantic status

In general, students who are in a romantic relationship may have a more challenging time focusing on their studies compared to those who are not. It is crucial to examine whether this is indeed the case.

Although it is not such a big difference, it can be confirmed that male and female students without romactic have better grades.

```{r echo=FALSE}
# Calculate average of G1G2avg for each combination of romantic status and sex
avg_romantic_0_female <- mean(df_student[df_student$romantic == 0 & df_student$sex == "F", "G1G2avg"])
avg_romantic_0_male <- mean(df_student[df_student$romantic == 0 & df_student$sex == "M", "G1G2avg"])
avg_romantic_1_female <- mean(df_student[df_student$romantic == 1 & df_student$sex == "F", "G1G2avg"])
avg_romantic_1_male <- mean(df_student[df_student$romantic == 1 & df_student$sex == "M", "G1G2avg"])

# Create a bar plot
ggplot(data = NULL, aes(x = factor(c("Female = 0", "Male = 0", "Female = 1", "Male = 1")), y = c(avg_romantic_0_female, avg_romantic_0_male, avg_romantic_1_female, avg_romantic_1_male), fill = c("#C44E52", "#C44E52", "#4C72B0", "#4C72B0"))) +
  geom_bar(stat = "identity", width = 0.6) +
  xlab("Sex and Romantic Status") + ylab("Average G1G2avg") +
  ggtitle("Average G1G2avg by Sex and Romantic Status") +
  guides(fill = FALSE)

```

### Study Time

The findings suggest that students who study for a longer duration have a higher average score compared to those who study for a shorter duration. 
```{r echo=FALSE}
# Calculate average of G1G2G3avg per studytime
study_avg <- aggregate(df_student$G1G2G3avg, by = list(df_student$studytime), FUN = mean)

# Create a bar graph
barplot(study_avg$x, names.arg = study_avg$Group.1, col = "orange", xlab = "Studytime",
        ylab = "Average G1G2G3 Score", main = "Average G1G2G3 Score by Study")
```

### Internet

The accessibility of the internet has become increasingly important in modern education, as it provides students with access to a vast array of learning materials that might otherwise be unavailable. It is widely recognized that the internet has the potential to enhance students' educational experiences, but it is important to assess whether this potential is being fully realized. Therefore, it is necessary to examine whether the same positive results regarding internet accessibility and academic performance were obtained in the experiment.

The following graph indicates that the difference in academic performance between students with and without Internet access is negligible.

```{r echo=FALSE}
df_student %>%
  group_by(internet) %>%
  summarise(G1G2G3avg_mean = mean(G1G2G3avg)) %>%
  ggplot(aes(x = factor(internet), y = G1G2G3avg_mean, fill = factor(internet))) +
  geom_bar(stat = "identity", width = 0.5) + 
  scale_fill_manual(values = c("#69b3a2", "skyblue")) + 
  labs(title = "Average Grades between Students with Internet and without Internet", 
       x = "Internet Access", 
       y = "Average G1G2G3 Scores") + 
  scale_x_discrete(labels = c("No", "Yes"))

```

## Models

```{r echo=FALSE}
set.seed(123)
partition <- sample(1:nrow(df_student), size=nrow(df_student)*0.7,replace=FALSE)

train.data <-df_student[partition, ]
test.data <- df_student[-partition, ]

target <- test.data$`G3`
```

### Model 1 

**Multiple Linear Regrssion**

```{r echo=FALSE}
data_lm_full <- lm(G3 ~ traveltime + studytime + failures + schoolsup + famEdsup + paid + activities +	nursery +	higher + internet +	romantic + famrel +	freetime + friendtime +	Dalc +	weekAlc +	health +	absences, data = df_student)

summary(data_lm_full)

```

```{r echo=FALSE}
data_step = stepAIC(data_lm_full, scope = list(upper = ~ .^2, lower = ~1))

summary(data_step)
```

```{r echo=FALSE}
y_obs <- test.data$G3

yhat_lm <- predict(data_lm_full, newdata=test.data)

yhat_step <- predict(data_step, newdata=test.data)

rmse(y_obs, yhat_lm)
rmse(y_obs, yhat_step)


```

### Model 2

**Random Forest Model**


```{r echo=FALSE}
set.seed(1000)

data_rf <- randomForest(G3 ~ traveltime + studytime + failures + schoolsup + famEdsup + paid + activities +	nursery +	higher + internet +	romantic + famrel +	freetime + friendtime +	Dalc +	weekAlc +	health +	absences, data = df_student)

data_rf

opar <- par(mfrow=c(1,2))

plot(data_rf)

varImpPlot(data_rf)

par(opar)

dev.off() 
```

```{r echo=FALSE}
y_obs <- test.data$G3
yhat_rf <- predict(data_rf, newdata = test.data)

rmse_value <- rmse(y_obs, yhat_rf)
rmse_value
```

### Model 3

**decision tree model**

```{r echo=FALSE}
data_tr <- rpart(G3~ traveltime + studytime + failures + schoolsup + famEdsup + paid + activities +	nursery +	higher + internet +	romantic + famrel +	freetime + friendtime +	Dalc +	weekAlc +	health +	absences, data = df_student)

data_tr

opar <- par(mfrow = c(1,1), xpd = NA)

plot(data_tr)

text(data_tr, use.n = TRUE)

par(opar) 

```

```{r echo=FALSE}
yhat_tr <- predict(data_tr,  newdata = test.data)

rmse(y_obs, yhat_tr)
```

## Model Selection

Why is regression model verification necessary? Inaccurate statistical models can be created if the data are irregular or if the relationship between the predictor and response variables is incorrectly established. In other words, a statistical model is created by concluding that there is no relationship between the predictor and the response variable even though there is actually a relationship, or that there is a relationship between the predictor and the response variable despite no relationship, but the actual real applying the model to the world can lead to incorrect predictions, making unnecessary and serious errors.

```{r}
boxplot(list(lm = y_obs-yhat_step,
             rf = y_obs-yhat_rf), ylab="Error in Validation Set")

abline(h=0, lty=2, col='blue')
```

```{r, eval = FALSE}
#Couldn't get this to compile
pairs(data.frame(y_obs=y_obs,
                 yhat_lm=yhat_step,
                 yhat_rf=yhat_rf),

      lower.panel=function(x,y){ points(x,y); abline(0, 1, col='red')},
      upper.panel = panel.cor) 

```




## Conclusion

In retrospect, I believe that the study would have been more robust if the data had been more precise and detailed. Investigating the underlying conditions that motivate students to study harder and how these factors affect their academic performance would have provided a more precise understanding of the relationship between external factors and academic success. While the survey data I used did provide useful insights, a more focused approach that delves into the specific motivators for studying and how these are related to academic outcomes could have yielded more comprehensive and sophisticated results.

Given more time, I would like to collect more extensive binary data and analyze it using binary regression models. This would allow me to examine the relationship between specific factors and academic performance in greater detail and to identify the factors that are most closely associated with academic success. By using more advanced statistical techniques, I could also explore the interplay between different external factors and their combined effects on academic performance. Such an analysis would be useful in designing targeted interventions to support students in their academic pursuits and improve educational outcomes. 

Overall, this study provides a starting point for future research in the field of education and highlights the need for more comprehensive and detailed data to fully understand the complex relationship between external factors and academic success.

## References


Data source: P. Cortez and A. Silva. Using Data Mining to Predict Secondary School Student Performance. In A. Brito and J. Teixeira Eds., Proceedings of 5th Future Business Technology Conference (FUBUTEC 2008) pp. 5-12, Porto, Portugal, April, 2008, EUROSIS, ISBN 978-9077381-39-7. Accessed via [Kaggle](https://www.kaggle.com/datasets/uciml/student-alcohol-consumption)



## Appendix 1: Data Dictionary
(from [Kaggle](https://www.kaggle.com/datasets/uciml/student-alcohol-consumption))

* *absences* - number of school absences (numeric: from 0 to 93)
* *absences_mean* - mean reported absences from both classes for students in Portuguese and Math
* *activities* - extra-curricular activities (binary: yes or no)
* *address* - student's home address type (binary: 'U' - urban or 'R' - rural)
* *age* - student's age (numeric: from 15 to 22)
* *Dalc* / *dayAlc* - workday alcohol consumption (numeric: from 1 - very low to 5 - very high) *renamed
* *failures* - number of past class failures (numeric: n if 1<=n<3, else 4)
* *famsize* - family size (binary: 'LE3' - less or equal to 3 or 'GT3' - greater than 3)
* *famsup* / *famEdsup*- family educational support (binary: yes or no) *renamed
* *Fedu* - father's education (numeric: 0 - none, 1 - primary education (4th grade), 2 – 5th to 9th grade, 3 – secondary education or 4 – higher education)
* *Fjob* - father's job (nominal: 'teacher', 'health' care related, civil 'services' (e.g. administrative or police), 'at_home' or 'other')
* *famrel* - quality of family relationships (numeric: from 1 - very bad to 5 - excellent)
* *freetime* - free time after school (numeric: from 1 - very low to 5 - very high) *renamed
* *goout* / *friendtime* - going out with friends (numeric: from 1 - very low to 5 - very high)
* *guardian* - student's guardian (nominal: 'mother', 'father' or 'other')
* *health* - current health status (numeric: from 1 - very bad to 5 - very good)
* *higher* - wants to take higher education (binary: yes or no)
* *internet* - Internet access at home (binary: yes or no)
* *Medu* - mother's education (numeric: 0 - none, 1 - primary education (4th grade), 2 – 5th to 9th grade, 3 – secondary education or 4 – * *higher* education)
* *Mjob* - mother's job (nominal: 'teacher', 'health' care related, civil 'services' (e.g. administrative or police), 'at_home' or 'other')
* *nursery* - attended nursery school (binary: yes or no)
* *parentEdu* - sum of mother's + fathers education level
* *paid* - extra paid classes within the course subject (Math or Portuguese) (binary: yes or no)
* *Pstatus* - parent's cohabitation status (binary: 'T' - living together or 'A' - apart)
* *reason* - reason to choose this school (nominal: close to 'home', school 'reputation', 'course' preference or 'other')
* *romantic* - with a romantic relationship (binary: yes or no)
* *school* - student's school (binary: 'GP' - Gabriel Pereira or 'MS' - Mousinho da Silveira)
* *schoolsup* - extra educational support (binary: yes or no)
* *sex* - student's sex (binary: 'F' - female or 'M' - male)
* *studytime* - weekly study time (numeric: 1 - <2 hours, 2 - 2 to 5 hours, 3 - 5 to 10 hours, or 4 - >10 hours)
* *traveltime* - home to school travel time (numeric: 1 - <15 min., 2 - 15 to 30 min., 3 - 30 min. to 1 hour, or 4 - >1 hour)
* *Walc* / *weekAlc* - weekend alcohol consumption (numeric: from 1 - very low to 5 - very high) *renamed


These grades are related with the course subject, Math or Portuguese and are dropped for the joint analysis:

*G1* - first period grade (numeric: from 0 to 20)
*G2* - second period grade (numeric: from 0 to 20)
*G3* - final grade (numeric: from 0 to 20)

This is the target variable:
*final_grade* - final grade averaged from both classes (numeric: from 0 to 20, output target)

### Appendix 2: Summary Statistics
```{r summary}
descrip
descrip_por
descrip_mat
```

### Appendix 3: Basic Plots

#### Students in Both Classes
```{r basicPlots}

basicp <- function(df, color){
df_long <- df %>% select_if(is.numeric)
p <- df_long %>% gather() %>% ggplot(aes(x= value)) + geom_histogram(stat = "count", fill = color) + facet_wrap(~key, scales = 'free')
print(p)
}

basicp (df_both, "skyblue")
```

#### Students in Math
```basicp(df_mat, "pink")```

#### Students in Portuguese
```basicp(df_por, "darkblue")```